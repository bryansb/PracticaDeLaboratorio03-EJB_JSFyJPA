<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Usuarios</title>
</h:head>
<h:body>
	<h:panelGroup id="main-content">
		<p:commandButton value="Crear Usuarios Random" action="#{userBean.userRandom()}" 
			style="margin-right:20px;" update="main-content"/>
		<h2>Crear Usuario</h2>
		<h:form>
			<h3>DNI</h3>
			<span class="ui-float-label">
				<p:inputText id="dni" value="#{userBean.dni}" maxlength="10" />
				<p:outputLabel for="dni" value="DNI" />
			</span>
			<h3>Email</h3>
			<span class="ui-float-label">
				<p:inputText id="email" value="#{userBean.email}" />
				<p:outputLabel for="email" value="Email" />
			</span>
			<h3>Nombre</h3>
			<span class="ui-float-label">
				<p:inputText id="name" value="#{userBean.name}" />
				<p:outputLabel for="name" value="Nombre" />
			</span>
			<h3>Apellido</h3>
			<span class="ui-float-label">
				<p:inputText id="lastname" value="#{userBean.lastname}" />
				<p:outputLabel for="lastname" value="Apellido" />
			</span>
		    <p:commandButton value="Crear" id="save" action="#{userBean.create()}"
		    	update="main-content" style="margin-right:20px;" />
		</h:form>
		
		<h2>Listar Usuarios</h2>
		<h:form>	        
			<p:dataTable value="#{userBean.userList}" var="u" style="text-align:center"
			rows="5" paginator="true"
	        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} 
	        {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	        rowsPerPageTemplate="5,10,20">
				<p:column>
					<f:facet name="header">DNI</f:facet>#{u.dni}
				</p:column>
				<p:column>
					<f:facet name="header">Email</f:facet>
					<h:inputText value="#{u.email}" size="10" rendered="#{u.editable}" />
					<h:outputText value="#{u.email}" rendered="#{not u.editable}" />
				</p:column>	
				<p:column>
					<f:facet name="header">Nombre</f:facet>
					<h:inputText value="#{u.name}" size="10" rendered="#{u.editable}" />
					<h:outputText value="#{u.name}" rendered="#{not u.editable}" />
				</p:column>	
				<p:column>
					<f:facet name="header">Apellido</f:facet>
					<h:inputText value="#{u.lastname}" size="10" rendered="#{u.editable}" />
					<h:outputText value="#{u.lastname}" rendered="#{not u.editable}" />
				</p:column>	
				<p:column>
					<f:facet name="header">Rol</f:facet>#{u.role}
				</p:column>
				<p:column>
					<f:facet name="header">Eliminado</f:facet>#{u.deleted}
				</p:column>
				<p:column>
					<f:facet name="header">Gestionar</f:facet>
					<h:commandButton value="Eliminar" action="#{userBean.delete(u)}" 
						style="margin-right:20px; background-color: #FF5574;" styleClass="ui-priority-primary"
						rendered="#{not u.deleted}" />
					<h:commandButton value="Restaurar" action="#{userBean.restore(u)}"
						style="margin-right:20px; background-color: #7FFFD4;" styleClass="ui-priority-primary"
						rendered="#{u.deleted}" />
				</p:column>
				<p:column>
					<f:facet name="header">Editar</f:facet>
					<h:commandButton value="Editar" action="#{userBean.update(u)}"
						style="margin-right:20px; background-color: #39A1FF;" styleClass="ui-priority-primary"
						rendered="#{not u.editable}" />
					<h:commandButton value="Guardar" action="#{userBean.save(u)}"
						style="margin-right:20px; background-color: #7FFFD4;" styleClass="ui-priority-primary"
						rendered="#{u.editable}" />
				</p:column>
			</p:dataTable>
		</h:form>
	</h:panelGroup>
</h:body>
</html>